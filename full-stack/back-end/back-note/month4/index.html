



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="你来啦！" href="http://example.com/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="你来啦！" href="http://example.com/atom.xml" />
<link rel="alternate" type="application/json" title="你来啦！" href="http://example.com/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="后端开发,SpringBoot" />


<link rel="canonical" href="http://example.com/full-stack/back-end/back-note/month4/">



  <title>
SpringBoot - 后端 - 全栈 |
libert-Aries's blog = 你来啦！ = 人生如逆旅 我亦是行人</title>
<meta name="generator" content="Hexo 7.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">SpringBoot
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2022-05-14 09:59:48">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2022-05-14T09:59:48+08:00">2022-05-14</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">libert-Aries's blog</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://t.alcy.cc/fj?455584"></li>
          <li class="item" data-background-image="https://t.alcy.cc/fj?375711"></li>
          <li class="item" data-background-image="https://t.alcy.cc/fj?826436"></li>
          <li class="item" data-background-image="https://t.alcy.cc/fj?361431"></li>
          <li class="item" data-background-image="https://t.alcy.cc/fj?428356"></li>
          <li class="item" data-background-image="https://t.alcy.cc/fj?437336"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span><i class="ic i-angle-right"></i>
<span  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/full-stack/" itemprop="item" rel="index" title="分类于 全栈"><span itemprop="name">全栈</span></a>
<meta itemprop="position" content="1" /></span>
<i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/full-stack/back-end/" itemprop="item" rel="index" title="分类于 后端"><span itemprop="name">后端</span></a>
<meta itemprop="position" content="2" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="http://example.com/full-stack/back-end/back-note/month4/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="libert-Aries">
    <meta itemprop="description" content="人生如逆旅 我亦是行人, 热烈 自由">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="你来啦！">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <p>SpringBoot 的配置与使用</p>
<span id="more"></span>
<h3 id="jdbc"><a class="markdownIt-Anchor" href="#jdbc">#</a> JDBC</h3>
<h4 id="jdbc的基本流程"><a class="markdownIt-Anchor" href="#jdbc的基本流程">#</a> JDBC 的基本流程</h4>
<ul>
<li>
<p>1. 注册驱动:</p>
<p>Class.forName(“com.mysql.cj.jdbc.Driver”);</p>
</li>
<li>
<p>2. 获得连接</p>
<p>String url=“jdbc:mysql://127.0.0.1:3309/et2110?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;rewriteBatchedStatements=true&amp;allowPublicKeyRetrieval=true”;<br>
String user=“root”;<br>
String pwd=“etoak”;<br>
Connection con = DriverManager.getConnection(url,user,pwd);</p>
</li>
<li>
<p>3. 创建执行 SQL 的 Statement 执行器</p>
</li>
<li>
<p>4. 执行 SQL 返回结果</p>
</li>
<li>
<p>5. 处理结果</p>
<p>while(rs.next()){<br>
int id = rs.getInt(“id”);<br>
String name = rs.getString(“name”);<br>
int age = rs.getInt(“age”);<br>
String phone = rs.getString(“phone”);<br>
String email = rs.getString(“email”);<br>
System.out.println(id+&quot;\t&quot;+name+&quot;\t&quot;+age+&quot;\t&quot;+<br>
phone+&quot;\t&quot;+email);<br>
}</p>
</li>
<li>
<p>6. 关闭资源</p>
<p>rs.close();	sta.close();	con.close();</p>
</li>
</ul>
<h4 id="执行器中的执行sql的方法"><a class="markdownIt-Anchor" href="#执行器中的执行sql的方法">#</a> 执行器中的执行 SQL 的方法</h4>
<p>​	1. execute: 万能方法  boolean :  有结果集的语句 ======&gt;true 没有结果集的 ==&gt;false</p>
<p>​	2. executeUpdate:insert update delete 返回 int，对数据库影响的行数</p>
<p>​	3. executeQuery:select  ResultSet</p>
<ol start="4">
<li>
<p>executeBatch : 执行多条语句</p>
<blockquote>
<p>JDBC 中每一条 SQL 都是靠着以上方法执行的，选择合适的方法执行合适的 SQL 至关重要</p>
</blockquote>
</li>
</ol>
<h4 id="预编译的执行器preparedstatement"><a class="markdownIt-Anchor" href="#预编译的执行器preparedstatement">#</a> 预编译的执行器 PreparedStatement</h4>
<ol>
<li>在实际开发中一般使用 PreparedStatement, 替换普通的 Statement 对象。</li>
<li>PreparedStatement 也是一个 Statement，PreparedStatement 继承了 Statement。</li>
<li>预编译特点：当创建 PreparedStatement 对象时，立刻传入 SQL 语句，SQL 语句立刻被发送到了数据库中。</li>
<li>参数支持？占位符传参。</li>
</ol>
<h4 id="可以自动增长的数字类型的主键如何返回"><a class="markdownIt-Anchor" href="#可以自动增长的数字类型的主键如何返回">#</a> 可以自动增长的数字类型的主键如何返回</h4>
<ul>
<li>
<p>JDBC 接口中自带自动增长的开关返回</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Statement</span>接口: RETURN_GENERATED_KEYS  NO_GENERATED_KEYS</span><br><span class="line">	<span class="keyword">execute</span>(<span class="keyword">sql</span>,<span class="type">int</span> autogeneratedKeys)</span><br><span class="line">	</span><br><span class="line">PreparedStatement接口:</span><br><span class="line">	<span class="keyword">Connection</span>.prepareStatement(<span class="keyword">sql</span>,<span class="type">int</span> autogeneratedKeys)</span><br><span class="line">	<span class="keyword">execute</span>()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="不可以自动增长的字符串类型的主键如何返回"><a class="markdownIt-Anchor" href="#不可以自动增长的字符串类型的主键如何返回">#</a> 不可以自动增长的字符串类型的主键如何返回</h4>
<ul>
<li>1. 先通过查询或者代码方式生成主键 2. 使用生成的主键添加</li>
</ul>
<blockquote>
<p>总结:</p>
<p>数字:  1. 采用自动返回的开关 con.prepareStatement (sql,Statement.RETURN_GENERATED_KEYS)</p>
<p>​			2.insert  ----&gt; 同一个连接 —&gt;select last_insert_id ()</p>
<p>字符串:</p>
<ol>
<li>
<p>查询数据库:select replace (uuid (),’-’,’’) as id  2.insert …</p>
<pre><code>												2.java代码的方式:String key = java.util.UUID.randomUUID().toString().replaceAll(uuid(),'-','');
</code></pre>
</li>
</ol>
</blockquote>
<h4 id="元数据"><a class="markdownIt-Anchor" href="#元数据">#</a> 元数据</h4>
<ol>
<li>DatabaseMetaData: 获得数据库本身信息的接口</li>
<li>ResultSetMetaData: 获得结果集中列信息的接口</li>
</ol>
<h4 id="事务"><a class="markdownIt-Anchor" href="#事务">#</a> 事务</h4>
<ul>
<li>
<p>jdbc 默认的提交模式是自动提交</p>
</li>
<li>
<p><strong>Connection.setAutoCommit (false)// 禁用自动提交</strong></p>
<p>sql1 sql2 … sqln</p>
</li>
<li>
<p><strong>Connection.commit ()// 提交</strong></p>
</li>
<li>
<p><strong>Connection.rollback ()// 回滚</strong></p>
</li>
</ul>
<blockquote>
<p>MyBatis 和 Spring 都用 JDBC 的方式控制事务！！！</p>
</blockquote>
<h3 id="javaweb开发基础"><a class="markdownIt-Anchor" href="#javaweb开发基础">#</a> JAVAWEB 开发基础</h3>
<h4 id="请求"><a class="markdownIt-Anchor" href="#请求">#</a> 请求</h4>
<p>格式：</p>
<ol>
<li>
<p>请求行： 请求方法 [GET/POST/PUT/DELETE]   请求资源 /index.html  协议版本 HTTP/1.1</p>
</li>
<li>
<p>请求头     Host Accept Accept-language cookie…</p>
</li>
<li key:value="">
<p>消息体 参数 key=value&amp;key1=value1 </p>
</li>
</ol>
<h4 id="响应"><a class="markdownIt-Anchor" href="#响应">#</a> 响应</h4>
<p>格式：</p>
<ol>
<li>
<p>状态行  协议版本  状态码  字符串</p>
</li>
<li>
<p>响应头 。。。。。</p>
</li>
<li>
<p>响应正文 <html>xx</html></p>
</li>
</ol>
<h4 id="使用servletresponse给客户端相应内容"><a class="markdownIt-Anchor" href="#使用servletresponse给客户端相应内容">#</a> 使用 ServletResponse 给客户端相应内容</h4>
<p><strong>响应字符内容使用 getWriter () 方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">//获得【向客户端输出内容】输出字符流</span></span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">out.println(<span class="string">&quot;&lt;H2&gt;大家好&lt;/H2&gt;&quot;</span>);</span><br><span class="line">out.close();</span><br></pre></td></tr></table></figure>
<p><strong>响应字节内容使用 getOutputStream 方法</strong></p>
<p>getOutputStream 可以向客户端输出任意数据。</p>
<h4 id="修改响应编码"><a class="markdownIt-Anchor" href="#修改响应编码">#</a> 修改响应编码</h4>
<ul>
<li>
<p>修改请求编码</p>
<ul>
<li>req.setCharacterEncoding(“UTF-8”)</li>
</ul>
</li>
<li>
<p>修改响应编码</p>
<ul>
<li>原则：一定要在 getWriter 之前设置响应编码</li>
<li>普通网页:response.setContentType (“text/html;charset=UTF-8”)</li>
<li>JSON:response.setContentType(“text/plain;charset=UTF-8”)</li>
<li>JPG:response.setContentType(“image/jpeg”)</li>
<li>未知：Tomcat/conf/web.xml 中搜索</li>
</ul>
</li>
</ul>
<h4 id="request对象中的内容"><a class="markdownIt-Anchor" href="#request对象中的内容">#</a> request 对象中的内容</h4>
<ul>
<li>getMethod  请求的方法 GET /POST</li>
<li>getProtocol  协议、版本 HTTP/1.1</li>
<li>getHeader</li>
<li>getContent-Type  获得 Content-Type 请求头</li>
<li>getContentLength  获得消息体中参数的长度 没有返回 - 1、</li>
</ul>
<p>获得参数</p>
<ul>
<li>getParameter</li>
<li>getParameterValues ()  一般用来获得复选框</li>
<li>getParameterMap</li>
</ul>
<h4 id="客户端向服务器发送请求的方式"><a class="markdownIt-Anchor" href="#客户端向服务器发送请求的方式">#</a> 客户端向服务器发送请求的方式</h4>
<p><strong>同步</strong></p>
<ol>
<li>
<p>​	<a href="xxx"> JSP</p>
</li>
<li>
<p>form 表单 action=&quot;&quot; method=“GET/POST”&gt;</p>
</li>
<li>
<p>JS 的方式实现 a 连接或者 form 表单提交</p>
<p>​	function tijiao(){</p>
<p>​		document.getElementById (“xxxForm”).submit () ；相当于表单提交</p>
<p>​	}</p>
<p>​	function tijiao1(){</p>
<p>​		window.location.href=“xxx”; 相当于 A 连接</p>
<p>​	}</p>
</li>
</ol>
<p><strong>异步</strong></p>
<ol>
<li>jquery  $.ajax $.post…</li>
<li>axios .post /get</li>
</ol>
<p>enctype: 对应的就是请求头中的 Content-Type</p>
<p>普通表单：默认</p>
<ul>
<li><strong>application/x-www-form-urlencoded</strong>: 把请求消息体中的参数组装成 key=value&amp;key1=value1 的格式</li>
</ul>
<blockquote>
<p>文件上传：必须改成以下的方式</p>
</blockquote>
<ul>
<li><strong>multipart/form-data</strong>: 把消息体中的参数以分隔符的方式分割传递到服务器</li>
</ul>
<p>调用流程：</p>
<p>Controller =&gt; Service =&gt; Dao</p>
<p><img data-src="C:%5CUsers%5Cdell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220527231231403.png" alt="image-20220527231231403"></p>
<h3 id="反射"><a class="markdownIt-Anchor" href="#反射">#</a> 反射</h3>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通过反射我们可以在运行期动态的获得类中的属性、方法、构造方法等信息<span class="comment">;</span></span><br><span class="line">通过反射我们可以在运行期动态的执行类中的方法<span class="comment">;</span></span><br><span class="line">通过反射我们可以在运行期动态的构造类的对象<span class="comment">;</span></span><br><span class="line">通过反射我们可以在运行期动态的判断对象的类型。</span><br></pre></td></tr></table></figure>
<p>常用方法：</p>
<ul>
<li>
<p>forName  加载指定名字的类</p>
</li>
<li>
<p>getName() /getSimpleName()</p>
<p>包名 + 类型名  /  类型名</p>
</li>
<li>
<p>newInstance ()  使用无参构造方法构造对象。</p>
<p>构造调用该方法的对象代表的类的新的对象  相当于 new + 无参构造…</p>
</li>
</ul>
<p>Class 类中与属性相关的方法：</p>
<ul>
<li>
<p>Field getField(String)</p>
</li>
<li>
<p>Field [] getFields (): 获得本类和直接父类中所有的公共属性（不包括私有）</p>
</li>
<li>
<p>getDeclaredField(String)</p>
</li>
<li>
<p>getDeclaredFields (): 获得本类中所有的属性【包括私有的】</p>
</li>
<li>
<p>getDeclaredMethod  在调用该方法的对象所代表的类中寻找指定名字和参数的方法</p>
<p>获得本类中所有的方法 【包括私有的】</p>
</li>
<li>
<p>invoke (): 执行方法</p>
</li>
</ul>
<p>策略模式： 1. 抽象策略 2. 具体策略 3. 环境</p>
<p>DBUtils 工具类 Spring JdbcTemplete == QueryRunner</p>
<h3 id="注解"><a class="markdownIt-Anchor" href="#注解">#</a> 注解</h3>
<p>@Retention: 该注解表示注解的保留策略。其中有一个属性 value，值是 RetentionPolicy.SOURCE\</p>
<ul>
<li>
<p>RetentionPolicy.CLASS  默认</p>
</li>
<li>
<p>RetentionPolicy.RUNTIME  保存到运行期</p>
</li>
</ul>
<p>@Target: 该注解表示 注解的适用程序元素的种类</p>
<p>value=ElementType.TYPE  类上 接口上 其他枚举上</p>
<p>​								METHOD 方法上</p>
<p>​									FIELD 属性</p>
<p>​								CONSTRUCTOR 构造方法</p>
<p>​									PACKAGE 包</p>
<p>​									PARAMETER 参数上</p>
<p>@Documented: 表示注解信息是否可以生成到文档中。</p>
<p>​				有该注解就可以生成到文档中，没有该注解就无法生成到文档中。</p>
<h3 id="ioc容器"><a class="markdownIt-Anchor" href="#ioc容器">#</a> IOC 容器</h3>
<ul>
<li>
<p>ApplicationContext 也是一个 BeanFactory 接口的继承者</p>
<ul>
<li>ApplicationContext 也是一个 BeanFactory。而且 ApplicationContext 和 web 容器组合更好一些。用的更多</li>
</ul>
</li>
<li>
<p>BeanFactory 加载机制是延迟加载，执行到 getBean 方法是才会构造对象，构造容器时不会构造对象。ApplicationContext 是立即加载，ApplicationContext 容器一旦构造，就会加载配置文件中的所有对象</p>
</li>
<li>
<p>Bean 对象指的是所有交给 Spring 管理的类构造出来的对象。如：Dao、Service、Controller、QueryRunner、SQLSessionFactory、JedisTemplate</p>
</li>
<li>
<p>IOC 容器默认构造的对象是单例的。同一个类型的 bean，不管 getBean 多少次都默认返回一个。可以使用 Scope 属性进行配置，如：prototype: 表示每一个 getBean 都会返回一个新的 bean 对象</p>
</li>
</ul>
<h3 id="ioc容器构造对象的方式"><a class="markdownIt-Anchor" href="#ioc容器构造对象的方式">#</a> IOC 容器构造对象的方式</h3>
<ul>
<li>无参构造方法</li>
<li>带参构造方法</li>
<li>静态工厂</li>
<li>实例工厂</li>
<li>FactoryBean 接口</li>
<li>注解</li>
</ul>
<h3 id="ioc容器属性赋值的方式"><a class="markdownIt-Anchor" href="#ioc容器属性赋值的方式">#</a> IOC 容器属性赋值的方式</h3>
<ul>
<li>setter 方法</li>
<li>构造方法</li>
<li>注解</li>
</ul>
<h3 id="xml配置文件版的controller-service-dao-db"><a class="markdownIt-Anchor" href="#xml配置文件版的controller-service-dao-db">#</a> XML（配置文件）版的 controller-service-dao-db</h3>
<ul>
<li>
<p>在 applicationContext.xml 中注册组件</p>
<ul>
<li>
<p>controller</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;controller&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.etoak.student.controller.StudentController&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--使用setter方法 给controller对象中的service属性赋值 值来自另外一个</span></span><br><span class="line"><span class="comment">        名字叫service的bean--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;service&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;service1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>service</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.etoak.student.service.StudentServiceImpl&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>dao</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.etoak.student.dao.StudentDaoImpl&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jt&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;jt&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>数据库</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jt&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;property name=&quot;dataSource&quot; ref=&quot;ds&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;ds&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;ds&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3309/et2202?characterEncoding=utf8<span class="symbol">&amp;amp;</span>useSSL=false<span class="symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="symbol">&amp;amp;</span>rewriteBatchedStatements=true<span class="symbol">&amp;amp;</span>allowPublicKeyRetrieval=true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;etoak&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="配置文件注解-混合版的controller-service-dao-db"><a class="markdownIt-Anchor" href="#配置文件注解-混合版的controller-service-dao-db">#</a> 配置文件 + 注解 混合版的 controller-service-dao-db</h3>
<ul>
<li>导入依赖</li>
<li>包 + 类</li>
<li>配置文件和注解</li>
</ul>
<blockquote>
<p>配置文件</p>
</blockquote>
<ul>
<li>applicationContext.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	开启IOC容器的扫描功能</span></span><br><span class="line"><span class="comment">	告诉IOC容器扫描  包  及其子包下的注解，然后去找 @Component 注解</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.etoak.student&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入外部的配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;ds&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;ds&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.user&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.pwd&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--启动注解配置请求和响应--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="导包总结"><a class="markdownIt-Anchor" href="#导包总结">#</a> 导包总结</h3>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">junit</span> 				导入测试包(junit  junit  <span class="number">4</span>.<span class="number">11</span>),其中的scope有多个参数(test,provided,compile)</span><br><span class="line"><span class="attribute">org</span>.apache.poi 		导入poi (org.apache.poi  poi-ooxml  <span class="number">3</span>.<span class="number">17</span>)</span><br><span class="line"><span class="attribute">mysql</span> 				注册驱动  (mysql  mysql-connector-java  <span class="number">8</span>.<span class="number">0</span>.<span class="number">22</span>)</span><br><span class="line"><span class="attribute">javax</span>.servlet-api 	导入servlet (javax.servlet  javax.servlet-api  <span class="number">3</span>.<span class="number">1</span>.<span class="number">0</span>)</span><br><span class="line"><span class="attribute">dom4j</span> 				解析xml	文件 (dom4j  dom4j  <span class="number">1</span>.<span class="number">6</span>.<span class="number">1</span>)</span><br><span class="line"><span class="attribute">spring</span>-context		 	导入springframework(核心容器包)(org.springframework  spring-context  <span class="number">5</span>.<span class="number">3</span>.<span class="number">11</span>)</span><br><span class="line"><span class="attribute">spring</span>-webmvc	 	导入springframework (核心容器包)(org.springframework  spring-webmvc  <span class="number">5</span>.<span class="number">3</span>.<span class="number">11</span>)</span><br><span class="line"><span class="attribute">commons</span>-dbutils 	导入DBUtils  (commons-dbutils  commons-dbutils  <span class="number">1</span>.<span class="number">6</span>)</span><br><span class="line"><span class="attribute">lombok</span>			 	导入Lombok (org.projectlombok  lombok  <span class="number">1</span>.<span class="number">18</span>.<span class="number">22</span>)</span><br><span class="line"><span class="attribute">commons</span>-dbcp		导入数据源 (commons-dbcp  commons-dbcp  <span class="number">1</span>.<span class="number">4</span>)</span><br><span class="line"><span class="attribute">spring</span>-jdbc			导入spring中用于连接的包(提供JdbcTemplate,DriverManagerDataSource) (org.springframework spring-jdbc  <span class="number">5</span>.<span class="number">3</span>.<span class="number">11</span>)</span><br><span class="line"><span class="attribute">jackson</span>-databind	spring中导入处理json的依赖 (com.fasterxml.jackson.core  jackson-databind  <span class="number">2</span>.<span class="number">13</span>.<span class="number">2</span>)</span><br><span class="line"><span class="attribute">fastjson</span>			普通版导入处理json的依赖(com.alibaba  fastjson  <span class="number">1</span>.<span class="number">2</span>.<span class="number">77</span>)</span><br><span class="line"><span class="attribute">druid</span>				阿里巴巴提供的一款连接池数据源(com.alibaba  druid  <span class="number">1</span>.<span class="number">2</span>.<span class="number">5</span>)</span><br><span class="line"><span class="attribute">commons</span>-fileupload	处理文件上传,带有文件上传的能够自动拆解分隔符(commons-fileupload  commons-fileupload  <span class="number">1</span>.<span class="number">4</span>)</span><br><span class="line"><span class="attribute">jedis</span>   			java语言加载redis的驱动( redis.clients  jedis  <span class="number">3</span>.<span class="number">7</span>.<span class="number">0</span> )</span><br><span class="line"><span class="attribute">log4j</span>				使用log4j生成日志信息 (log4j  log4j  <span class="number">1</span>.<span class="number">2</span>.<span class="number">17</span>)</span><br><span class="line"><span class="attribute">mybatis</span>  			使用mybatis时所导依赖(org.mybatis   mybatis   <span class="number">3</span>.<span class="number">5</span>.<span class="number">8</span>)</span><br><span class="line"><span class="attribute">mybatis</span>-spring 		mybatis和spring的整合包 (org.mybatis   mybatis-spring  <span class="number">2</span>.<span class="number">0</span>.<span class="number">7</span>)</span><br><span class="line"><span class="attribute">pagehelper</span>  		分页插件( com.github.pagehelper  pagehelper  <span class="number">5</span>.<span class="number">2</span>.<span class="number">0</span> )</span><br><span class="line"><span class="attribute">ojdbc6</span>				orcale的驱动包(com.oracle  ojdbc6  <span class="number">12.1.0.1</span>-atlassian-hosted)</span><br><span class="line"><span class="attribute">tomcat</span>-catalina   	(org.apache.tomcat	   tomcat-catalina	  <span class="number">9</span>.<span class="number">0</span>.<span class="number">58</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre>spring:spring-webmvc	 spring-jdbc	 jackson-databind	 commons-fileupload</pre></td></tr><tr><td data-num="2"></td><td><pre>  lombok</pre></td></tr><tr><td data-num="3"></td><td><pre>  javax.servlet-api</pre></td></tr><tr><td data-num="4"></td><td><pre>  mysql-connector-java</pre></td></tr><tr><td data-num="5"></td><td><pre>  mybatis	 mybatis-spring</pre></td></tr><tr><td data-num="6"></td><td><pre>  log4j</pre></td></tr><tr><td data-num="7"></td><td><pre>  (druid)</pre></td></tr></table></figure></li>
</ul>
<h3 id="注解总结"><a class="markdownIt-Anchor" href="#注解总结">#</a> 注解总结</h3>
<ul>
<li>构造对象的注解【构造对象 = new + 注册给 IOC 容器】</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">名字</th>
<th style="text-align:center">所在包</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">@Component</td>
<td style="text-align:center">spring-context</td>
<td style="text-align:center">组件</td>
<td style="text-align:center">通用</td>
</tr>
<tr>
<td style="text-align:center">@Controller</td>
<td style="text-align:center">spring-context</td>
<td style="text-align:center">控制器</td>
<td style="text-align:center">controller 类上</td>
</tr>
<tr>
<td style="text-align:center">@Service</td>
<td style="text-align:center">spring-context</td>
<td style="text-align:center">服务层</td>
<td style="text-align:center">service 类上</td>
</tr>
<tr>
<td style="text-align:center">@Repository</td>
<td style="text-align:center">spring-context</td>
<td style="text-align:center">dao 层</td>
<td style="text-align:center">dao 层类上</td>
</tr>
<tr>
<td style="text-align:center">@Configuration</td>
<td style="text-align:center">spring-context</td>
<td style="text-align:center">配置</td>
<td style="text-align:center">写在配置类上</td>
</tr>
<tr>
<td style="text-align:center">@Bean</td>
<td style="text-align:center">spring-context</td>
<td style="text-align:center">注册 IOC 容器的对象，默认方法名字就是 bean 的 id</td>
<td style="text-align:center">写在方法上</td>
</tr>
</tbody>
</table>
<ul>
<li>属性赋值</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">名字</th>
<th style="text-align:center">所在包</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">@Autowired</td>
<td style="text-align:center">spring-beans</td>
<td style="text-align:center">默认按照类型匹配</td>
<td style="text-align:center">注入属性对象</td>
</tr>
<tr>
<td style="text-align:center">@Qualifier</td>
<td style="text-align:center">spring-beans</td>
<td style="text-align:center">指定名字</td>
<td style="text-align:center">和 autowired 搭配</td>
</tr>
<tr>
<td style="text-align:center">@Value</td>
<td style="text-align:center">spring-beans</td>
<td style="text-align:center">给普通属性赋值</td>
<td style="text-align:center">写在普通参数的上面</td>
</tr>
<tr>
<td style="text-align:center">@Resource</td>
<td style="text-align:center">JAVAEE 的包</td>
<td style="text-align:center">默认按照名字匹配</td>
<td style="text-align:center">JAVAEE 的标准包，不是 Spring 的包</td>
</tr>
</tbody>
</table>
<ul>
<li>包扫描</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">名字</th>
<th style="text-align:center">所在包</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">@ComponentScan</td>
<td style="text-align:center">spring-context</td>
<td style="text-align:center">扫描包及其子包中的类，如果该类中有构造对象或者属性值的注解，则自动处理</td>
<td style="text-align:center">扫描以上注解</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>引入外部资源</p>
<p>@PropertySource:(“classpath:db.properties”)</p>
</li>
<li>
<p>解决跨域问题</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span></span><br></pre></td></tr></table></figure>
<ul>
<li>@Controller + @ResponseBody</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br></pre></td></tr></table></figure>
<ul>
<li>@PostMapping</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以下两个注解效果相等</span></span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/queryMts&quot;, method= RequestMethod.POST)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/queryMts&quot;)</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">名字</th>
<th style="text-align:center">含义</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">@Configuration</td>
<td style="text-align:center">代表该类是一个配置类相当于写了一个 applicationContext.xml</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">@ComponentScan(basePackages = “com.etoak.user”)</td>
<td style="text-align:center">开启 IOC 容器的扫描功能 告诉 IOC 容器扫描  包  及其子包下的注解，然后去找 @Component 注解</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">@PropertySource(“classpath:db.properties”)</td>
<td style="text-align:center">引入外部配置文件</td>
<td>需要在 resource 中引入 db.properties</td>
</tr>
<tr>
<td style="text-align:center">@EnableWebMvc</td>
<td style="text-align:center">启动注解配置请求和响应</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">@EnableTransactionManagement</td>
<td style="text-align:center">启动事务管理器</td>
<td>需要在类中注册一个事务管理器 Bean</td>
</tr>
<tr>
<td style="text-align:center">@Data</td>
<td style="text-align:center">getter+setter+hashcode+equals+toString</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">@NoArgsConstructor</td>
<td style="text-align:center">无参数的构造方法</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">@AllArgsConstructor</td>
<td style="text-align:center">全参数的构造方法</td>
<td></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="jdbctemplate工具类的使用"><a class="markdownIt-Anchor" href="#jdbctemplate工具类的使用">#</a> JdbcTemplate 工具类的使用</h3>
<h4 id="连接数据库时需要返回主键"><a class="markdownIt-Anchor" href="#连接数据库时需要返回主键">#</a> 连接数据库时，需要返回主键</h4>
<blockquote>
<p>选择 jt.update (PreparedStatementCreator psc, KeyHolder generatedKeyHolder)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//存放自动生成的主键</span></span><br><span class="line"><span class="type">KeyHolder</span> <span class="variable">kh</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GeneratedKeyHolder</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> jt.update(con-&gt;&#123;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pst</span> <span class="operator">=</span> con.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);</span><br><span class="line">        pst.setXXX(<span class="number">1</span>,XXX.getXXX());</span><br><span class="line">        ....</span><br><span class="line">        <span class="keyword">return</span> pst;</span><br><span class="line">&#125;,kh);</span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> kh.getKey().intValue();</span><br><span class="line">XXX.setId(id);</span><br></pre></td></tr></table></figure>
<h4 id="rowmapper-处理结果集"><a class="markdownIt-Anchor" href="#rowmapper-处理结果集">#</a> RowMapper : 处理结果集</h4>
<ul>
<li>得到一个结果</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Student <span class="title function_">queryById</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from student where id = ?&quot;</span></span><br><span class="line">	<span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> jt.queryForObject(sql,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Student&gt;(Student.class),id);</span><br><span class="line">	<span class="keyword">return</span> stu;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>得到多个结果</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">queryAll</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">    List&lt;Student&gt; list = jt.query(sql,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Student&gt;(Student.class));</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="columnmaprowmapper处理结果集"><a class="markdownIt-Anchor" href="#columnmaprowmapper处理结果集">#</a> ColumnMapRowMapper 处理结果集</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">queryAllByMap</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line">    List&lt;Map&lt;String,Object&gt;&gt; data = jt.query(sql,<span class="keyword">new</span> <span class="title class_">ColumnMapRowMapper</span>());</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="singlecolumnrowmapper处理结果集"><a class="markdownIt-Anchor" href="#singlecolumnrowmapper处理结果集">#</a> SingleColumnRowMapper 处理结果集</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countStu</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from student&quot;</span>;</span><br><span class="line">    <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> jt.queryForObject(sql,<span class="keyword">new</span> <span class="title class_">SingleColumnRowMapper</span>&lt;Long&gt;());</span><br><span class="line">    <span class="keyword">return</span> count.intValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="注解版的测试类中的文件读取"><a class="markdownIt-Anchor" href="#注解版的测试类中的文件读取">#</a> 注解版的测试类中的文件读取</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ctx;</span><br><span class="line"><span class="meta">@Before</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">    ctx = <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(XXX.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="通过spring-webmvc模块接收请求-返回响应"><a class="markdownIt-Anchor" href="#通过spring-webmvc模块接收请求-返回响应">#</a> 通过 Spring webmvc 模块接收请求 返回响应</h3>
<p>1.<strong> 导入依赖：spring-webmvc</strong></p>
<p>2.<strong> 配置 applicationContext.xml</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driver&gt;	启动注解配置MVC请求和响应</span><br><span class="line"><span class="meta">@RequestMapping</span>:拦截的请求</span><br><span class="line"><span class="meta">@ResponseBody</span>:返回的响应是JSON</span><br></pre></td></tr></table></figure>
<p>3.<strong> 在 controller 中配置相关注解</strong></p>
<p>​	@RequestMapping + @ResponseBody</p>
<p>4.web.xml 配置 DispatcherServlet</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--默认使用配置文件：/WEB-INF/mvc-servlet.xml</span></span><br><span class="line"><span class="comment">		通过contextConfigLocation：指定配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="springmvc中如何把参数从客户端传递给服务器"><a class="markdownIt-Anchor" href="#springmvc中如何把参数从客户端传递给服务器">#</a> SpringMVC 中如何把参数从客户端传递给服务器</h3>
<p><strong>1. 普通传参</strong></p>
<ul>
<li>
<h5 id="客户端传递的是"><a class="markdownIt-Anchor" href="#客户端传递的是">#</a> 客户端传递的是:</h5>
<form action enctype="application/x-www-form-urlencoded">
    <input type="text" name="uname" />
	<input type="password" name="pwd"/>
<input type="submit">
</form>
<p>浏览器就会把控件名字和值组装成 key=value 发送到服务器端:</p>
<p>如:uname=xx&amp;pwd=xx</p>
</li>
<li>
<p>** 服务器 Controller 中 **</p>
</li>
</ul>
<p>一个一个接: method (@RequestParam (“uname”) String username,String pwd)</p>
<p>打包成一个对象:add (Menu menu): 对象中的属性和参数名字一致</p>
<p><strong>2.JSON 格式</strong></p>
<ul>
<li>
<p><strong>客户端：</strong></p>
<ul>
<li “name”:xx,price:xx,info:xx="">JSON 格式：</li>
</ul>
</li>
<li>
<p><strong>服务器</strong></p>
<ul>
<li>
<p>对象接收 add (@RequestBody Menu menu）</p>
</li>
<li>
<p>@RequestBody: 表示把消息体中的参数组装成一个对象</p>
<blockquote>
<p>@RequestBody 主要用来接收前端传递给后端的 json 字符串中的数据的。而最常用的使用请求体传参的无疑是 POST 请求，所以使用 @RequestBody 接收数据时，一般都用 POST 方式提交。在后端的同一个接收方法里，@RequestBody 与 @RequestParam () 可以同时使用，@RequestBody 最多只能有一个，而 @RequestParam () 可以有多个。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="redis数据库"><a class="markdownIt-Anchor" href="#redis数据库">#</a> redis 数据库</h3>
<p>pom.xml 引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="mvc注解-requestmapping-responsebody"><a class="markdownIt-Anchor" href="#mvc注解-requestmapping-responsebody">#</a> mvc 注解 @RequestMapping @ResponseBody</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="静态资源交给defaultservlet处理"><a class="markdownIt-Anchor" href="#静态资源交给defaultservlet处理">#</a> 静态资源交给 DefaultServlet 处理</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:default-servlet-handler</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="文件上传解析器-id必须叫multipartresolver"><a class="markdownIt-Anchor" href="#文件上传解析器-id必须叫multipartresolver">#</a> 文件上传解析器 id：必须叫 multipartResolver</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	默认文件解析器是没有配置的，所有如果需要文件上传，首先配置文件上传解析器。			applicationContext.xml注册bean</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="mybatis"><a class="markdownIt-Anchor" href="#mybatis">#</a> MyBatis</h3>
<p>MyBatis 中有两类配置文件</p>
<ol>
<li>属性文件 mybatis-config.xml: 连接数据库的信息 + 属性 配置</li>
<li>映射文件 StudentMapper.xml: 我们写的 SQL 语句</li>
</ol>
<h3 id="mybatis提供的用户接口"><a class="markdownIt-Anchor" href="#mybatis提供的用户接口">#</a> MyBatis 提供的用户接口</h3>
<ol>
<li>org.apache.ibatis.session.SqlSessionFactoryBuilder:
<ol>
<li>build (IO 流)</li>
<li>build (Configuration 配置对象)</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">f = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br></pre></td></tr></table></figure>
<ol>
<li>org.apache.ibatis.session.SqlSessionFactory:
<ol>
<li>openSession()</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.openSession();</span><br></pre></td></tr></table></figure>
<ol>
<li>org.apache.ibatis.session.SqlSession:[核心]
<ol>
<li>insert</li>
<li>update</li>
<li>delete</li>
<li>selectOne selectList…</li>
</ol>
</li>
</ol>
<h3 id="mybatis-configxml配置"><a class="markdownIt-Anchor" href="#mybatis-configxml配置">#</a> mybatis-config.xml 配置</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入外部的配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span><span class="comment">&lt;!--logImpl:LOG4J 采用log4j做日志--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--注册别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--所有需要com.etoak.student.entity.Student的地方都可以使用stu代替--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.etoak.student.entity.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;stu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;m&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;m&quot;</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!--事务管理器:JDBC:代表使用JDBC的方式管理事务</span></span><br><span class="line"><span class="comment">			Connection.setAutoCommit();</span></span><br><span class="line"><span class="comment">			Connection.commit();/rollback()</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--POOLED:代表采用MyBatis使用了连接池方式实现的数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.user&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;m.pwd&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--映射文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;StudentMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="xxxmapperxml"><a class="markdownIt-Anchor" href="#xxxmapperxml">#</a> XXXMapper.xml</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.et2202&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    insert: 执行 insert语句 executeUpdate</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStu&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.etoak.student.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        insert into student( name, age, birth, email, schid)</span><br><span class="line">        values(#&#123;name&#125;,#&#123;age&#125;,#&#123;birth&#125;,#&#123;email&#125;,#&#123;schid&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    select:执行查询</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">resultType</span>=<span class="string">&quot;com.etoak.student.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from student where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    UPDATE executeUpdate</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateStu&quot;</span> &gt;</span></span><br><span class="line">        update student set name=#&#123;name&#125;,age=#&#123;age&#125;,birth=#&#123;birth&#125;,</span><br><span class="line">                           email=#&#123;email&#125; where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    delete executeUpdate</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteStu&quot;</span> &gt;</span></span><br><span class="line">        delete from student where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.etoak.student.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from student</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Mapper.xml 中 namespace 的名字和 Mapper 接口的名字一致</li>
<li>Mapper.xml 中的 SQL 语句的 id 和 Mapper 接口中方法名字一致</li>
</ul>
<h3 id="类中属性和表中字段不完全一致"><a class="markdownIt-Anchor" href="#类中属性和表中字段不完全一致">#</a> 类中属性和表中字段不完全一致</h3>
<ol>
<li>
<p>查询</p>
<ol>
<li>
<p>起别名</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">resultType</span>=<span class="string">&quot;stu&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        s_id as id,</span><br><span class="line">        s_name name,</span><br><span class="line">        s_age age,</span><br><span class="line">        s_birth birth,</span><br><span class="line">        s_email as email,</span><br><span class="line">        s_schid as schid</span><br><span class="line">        from tb_stu where s_id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使用 resultMap</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;rMap_stu&quot;</span> <span class="attr">type</span>=<span class="string">&quot;stu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_birth&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;schid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_schid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;rMap_stu&quot;</span>&gt;</span></span><br><span class="line">        select * from tb_stu where s_id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="传递多个参数"><a class="markdownIt-Anchor" href="#传递多个参数">#</a> 传递多个参数</h3>
<ol>
<li>
<p>Map</p>
</li>
<li>
<p>@Param</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> List&lt;Student&gt; <span class="title function_">querySome1</span><span class="params">(<span class="meta">@Param(&quot;start&quot;)</span><span class="type">int</span> startadadfa,</span></span><br><span class="line"><span class="params">                            <span class="meta">@Param(&quot;pageSize&quot;)</span> <span class="type">int</span> pageSizeasdfadf)</span>;</span><br><span class="line"></span><br><span class="line">List&lt;Student&gt; <span class="title function_">querySome</span><span class="params">(Map&lt;String,Object&gt; map)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>对象</p>
</li>
</ol>
<h3 id="resulttype和resultmap"><a class="markdownIt-Anchor" href="#resulttype和resultmap">#</a> resultType 和 resultMap</h3>
<ul>
<li>resultType: 表示执行完 SQL 查询之后的结果集的每一条记录返回的类型，如：自定义的对象 Student/User/Teacher、int、map</li>
<li>resultMap:</li>
</ul>
<h3 id="mybatis获得添加到数据库中的主键"><a class="markdownIt-Anchor" href="#mybatis获得添加到数据库中的主键">#</a> MyBatis 获得添加到数据库中的主键</h3>
<ol>
<li>
<p>使用 useGeneratedKeys + keyProperty 属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStudent&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">keyColumn</span>=<span class="string">&quot;s_id&quot;</span>&gt;</span></span><br><span class="line">	insert into tb_stu(s_name,s_age,s_birth,s_email,s_schid) values(#&#123;name&#125;,#&#123;age&#125;,#&#123;birth&#125;,#&#123;email&#125;,#&#123;schid&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>selectKey</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStudent&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;stu&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">keyColumn</span>=<span class="string">&quot;s_id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">order</span>=<span class="string">&quot;AFTER&quot;</span>&gt;</span></span><br><span class="line">    	select last_insert_id()  //order=&quot;AFTER&quot;</span><br><span class="line">        select replace(uuid,&#x27;-&#x27;,&#x27;&#x27;)  //order=&quot;BEFORE&quot;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    insert into tb_stu(s_name,s_age,s_birth,s_email,s_schid) values(#&#123;name&#125;,#&#123;age&#125;,#&#123;birth&#125;,#&#123;email&#125;,#&#123;schid&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="批量添加"><a class="markdownIt-Anchor" href="#批量添加">#</a> 批量添加</h3>
<h4 id="使用动态标签foreach"><a class="markdownIt-Anchor" href="#使用动态标签foreach">#</a> 使用动态标签 foreach</h4>
<ol>
<li>
<p>多个 ()</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStus&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">	insert into tb_stu(s_name,s_age,s_birth,s_email,s_schid)</span><br><span class="line">    values</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;s&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">    	(#&#123;s.name&#125;,#&#123;s.age&#125;,#&#123;s.birth&#125;,#&#123;s.email&#125;,#&#123;s.schid&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>子查询</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStus&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">	insert into tb_stu(s_name,s_age,s_birth,s_email,s_schid)</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;s&quot;</span> <span class="attr">separator</span>=<span class="string">&quot; union &quot;</span>&gt;</span></span><br><span class="line">    	(select #&#123;s.name&#125;,#&#123;s.age&#125;,#&#123;s.birth&#125;,#&#123;s.email&#125;,#&#123;s.schid&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="模糊查询和"><a class="markdownIt-Anchor" href="#模糊查询和">#</a> 模糊查询：# 和 $</h3>
<ol>
<li>#底层使用的是预编译的 Statement，即：PreparedStatement，支持？占位符。$ 底层使用的是普通 Statement，不支持？占位符，参数只能拼接。</li>
</ol>
<h3 id="mybatis中的动态sql标签"><a class="markdownIt-Anchor" href="#mybatis中的动态sql标签">#</a> MyBatis 中的动态 SQL 标签</h3>
<ul>
<li>
<p>where</p>
</li>
<li>
<p>if</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryByConditions&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;rMap_stu&quot;</span>&gt;</span></span><br><span class="line">    select * from tb_stu</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27; &quot;</span>&gt;</span></span><br><span class="line">            and s_name like &#x27;%$&#123;name&#125;%&#x27;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null and email!=&#x27;&#x27; &quot;</span>&gt;</span></span><br><span class="line">            and s_email=#&#123;email&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>foreach</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStus1&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">     insert into tb_stu(s_name, s_age, s_birth, s_email, s_schid)</span><br><span class="line">     values</span><br><span class="line">     <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;s&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">         (#&#123;s.name&#125;,#&#123;s.age&#125;,#&#123;s.birth&#125;,#&#123;s.email&#125;,#&#123;s.schid&#125;)</span><br><span class="line">     <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStus&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    insert into tb_stu(s_name, s_age, s_birth, s_email, s_schid)</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;s&quot;</span> <span class="attr">separator</span>=<span class="string">&quot; union &quot;</span>&gt;</span></span><br><span class="line">        (select  #&#123;s.name&#125;,#&#123;s.age&#125;,#&#123;s.birth&#125;,#&#123;s.email&#125;,#&#123;s.schid&#125; )</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>trim</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryByConditions&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;rMap_stu&quot;</span>&gt;</span></span><br><span class="line">     select * from tb_stu</span><br><span class="line">     <span class="comment">&lt;!--prefix:前缀  prefixOverrides:前边遇到什么内容干掉--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27; &quot;</span>&gt;</span></span><br><span class="line">             and s_name like &#x27;%$&#123;name&#125;%&#x27;</span><br><span class="line">         &lt;/if &gt;</span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null and email!=&#x27;&#x27; &quot;</span>&gt;</span></span><br><span class="line">             and s_email=#&#123;email&#125;</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>chose…when.otherwise</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryByConditions&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;rMap_stu&quot;</span>&gt;</span></span><br><span class="line">     select * from tb_stu</span><br><span class="line">     <span class="comment">&lt;!--prefix:前缀  prefixOverrides:前边遇到什么内容干掉--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27; &quot;</span>&gt;</span></span><br><span class="line">                 and s_name like &#x27;%$&#123;name&#125;%&#x27;</span><br><span class="line">             <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                 and s_email=#&#123;email&#125;  </span><br><span class="line">             <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="一对一和一对多的关联查询"><a class="markdownIt-Anchor" href="#一对一和一对多的关联查询">#</a> 一对一和一对多的关联查询</h3>
<ul>
<li>
<p>association</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;rMap_stu_sch&quot;</span> <span class="attr">type</span>=<span class="string">&quot;stu&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_birth&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;schid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_schid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--association:一对一关联</span></span><br><span class="line"><span class="comment">            property:类中的属性 javaType:属性的类型--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;sch&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.etoak.student.entity.School&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">column</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;info&quot;</span> <span class="attr">column</span>=<span class="string">&quot;info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryByIdWithSch&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;rMap_stu_sch&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    s_id, s_name, s_age, s_birth, s_email, s_schid,</span><br><span class="line">    sch.id, sch.name, sch.phone,sch.info</span><br><span class="line">    from tb_stu s left join school sch</span><br><span class="line">    on s.s_schid = sch.id where s.s_id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>collection：一对多</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;rMap_sch&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.etoak.student.entity.School&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">column</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;info&quot;</span> <span class="attr">column</span>=<span class="string">&quot;info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        collection：表示集合 List /set都可以</span></span><br><span class="line"><span class="comment">        property:类中的属性</span></span><br><span class="line"><span class="comment">        ofType:集合中每一个元素的类型</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;stus&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;stu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_birth&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;schid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_schid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;querySchWithStus&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;rMap_sch&quot;</span>&gt;</span></span><br><span class="line">    select sch.id, sch.name, sch.phone,sch.info,</span><br><span class="line">    s_id, s_name, s_age, s_birth, s_email, s_schid</span><br><span class="line">    from school sch   left join tb_stu s on s.s_schid = sch.id</span><br><span class="line">    where sch.id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="mybatis-configxml中起别名"><a class="markdownIt-Anchor" href="#mybatis-configxml中起别名">#</a> mybatis-config.xml 中起别名</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注册别名(给实体类),所有需要使用 com.etoak.student.entity.Student 的地方都可以使用别名stu 来代替   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.etoak.student.entity.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;stu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">对应着下面StudentMapper.xml中的别名stu</span><br><span class="line"><span class="comment">&lt;!-- 当需要赋值的参数是对象时(stu)，则需要和Student中的属性相匹配,如果是基础数据类型则随便写   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStudent&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;stu&quot;</span>&gt;</span></span><br><span class="line">    insert into tb_stu(s_name, s_age, s_birth, s_emial, s_schid) values(#&#123;name&#125;,#&#123;age&#125;,#&#123;birth&#125;,#&#123;email&#125;,#&#123;schid&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="配置applicationcontextxml"><a class="markdownIt-Anchor" href="#配置applicationcontextxml">#</a> 配置 applicationContext.xml</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;bean class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</span></span><br><span class="line"><span class="comment">	  &lt;property name=&quot;dataSource&quot; ref=&quot;ds&quot;&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">	&lt;/bean&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;bean class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;</span></span><br><span class="line"><span class="comment">		&lt;constructor-arg name=&quot;sqlSessionFactory&quot; ref=&quot;f&quot;&gt;&lt;/constructor-arg&gt;</span></span><br><span class="line"><span class="comment">	&lt;/bean&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--扫描Mapper包 自动构造Mapper接口的代理对象 并且注入到IOC容器中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.etoak.user.mapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;ds&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mappers/*Mapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--给com.etoak.user.entity包及其子包中的类起别名 别名就是类名字首字母小写--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.etoak.entity&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;ds&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="实体类上起别名"><a class="markdownIt-Anchor" href="#实体类上起别名">#</a> 实体类上起别名</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;别名&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XXX</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="分页插件pagehelper"><a class="markdownIt-Anchor" href="#分页插件pagehelper">#</a> 分页插件 pagehelper</h3>
<ol>
<li>导入依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pom.xml导入依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>配置插件</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--applicationContext.xml配置插件--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--注意其他配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;plugins&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--使用下面的方式配置参数，一行配置一个 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">                    helperDialect=mysql</span><br><span class="line">                <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>分页	PageHelper.startPage (vo.getPageNumber (),vo.getPageSize ());</li>
</ol>
<h3 id="前后端日期时间格式转换客户端服务器"><a class="markdownIt-Anchor" href="#前后端日期时间格式转换客户端服务器">#</a> 前后端日期时间格式转换（客户端 === 服务器）</h3>
<ul>
<li>
<p>@DateTimeFormat (&quot;&quot;)  客户端到服务器（来）</p>
</li>
<li>
<p>@JsonFormat (pattern = “yyyy-MM-dd hh:mm:ss”)  服务器到客户端（回）</p>
</li>
</ul>
<h3 id="spring中的事务aop思想"><a class="markdownIt-Anchor" href="#spring中的事务aop思想">#</a> spring 中的事务（aop 思想）</h3>
<p>使用注解 @Transactional 开启事务（全自动）</p>
<ul>
<li>
<ol>
<li>
<p>写注解	@Transactional</p>
</li>
<li>
<p>applicationContext.xml 中启用注解版事务</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;tm&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;tm&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;ds&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<blockquote>
<p><strong>!!!	开启事务一定不能自己 try	!!!</strong></p>
</blockquote>
<h3 id="有关文件上传前后端参数名称"><a class="markdownIt-Anchor" href="#有关文件上传前后端参数名称">#</a> 有关文件上传前后端参数名称</h3>
<p>前端文件上传的 <strong>name</strong> 属性的值一定要和后端 <strong>MultipartFile XXX</strong> 接收的值	<strong>XXX</strong> 对应，即参数名一样</p>
<h3 id="servlet30之后创建servlet新的方式"><a class="markdownIt-Anchor" href="#servlet30之后创建servlet新的方式">#</a> Servlet3.0 之后创建 Servlet 新的方式</h3>
<ul>
<li>
<ol>
<li>
<p>web.xml 注册</p>
<p>写一个 Servlet 类，实现 Servlet 标准（继承 HttpServlet），然后通过 web.xml 中注册</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">通过web.<span class="built_in">xml</span>文件【部署描述符】中配置声明的方式注册</span><br><span class="line">Servlet</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<ol start="2">
<li>
<p>注解注册</p>
<p>写一个 Servlet 类，实现 Servlet 标准（继承 HttpServlet), 然后通过注解配置 Servlet ： @WebServlet (value=&quot;&quot;,name=&quot;&quot; ,urlpatterns=&quot;&quot; ,initPar ams=)</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">通过注解的方式<span class="variable">@WebServlet</span> <span class="variable">@WebFilter</span></span><br><span class="line"><span class="variable">@WebListener</span>方式注册Servlet</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<ol start="3">
<li>
<p>代码动态注册</p>
<p>写一个 Servlet 类，实现 Servlet 标准（继承 HttpServlet)，然后通过 SPI (服务器发现机制) 的方式 注册 Servlet</p>
<ul>
<li>
<p>首先在我工程中定义一个 ServletContainerInitializer 接 口的实现类（MyInitializer），实现 onStartup 方法， 在该方法中可以动态注册 servlet\filter\listener</p>
</li>
<li>
<p>再 classpath 下 METAINF/services/javax.servlet.ServletContainerInitializer 的 文件，文件中写启动类的名字 (com.etoak.init.MyInitializer)</p>
</li>
<li>
<p>启动时可以挂载</p>
</li>
<li>
<blockquote>
<p>Tomcat 在启动时，主动加载所有 jar 包（包括我们写 的工程中）METAINF/services/javax.servlet.ServletContainerInitializer 文件对应的类，然后执行其中的 onStartUp 方法。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="纯注解版的spring-mvc配置步骤"><a class="markdownIt-Anchor" href="#纯注解版的spring-mvc配置步骤">#</a> 纯注解版的 Spring MVC 配置步骤</h3>
<ul>
<li>
<p>导入依赖 spring-webmvc spring-jdbc</p>
</li>
<li>
<p>applicationContext.XML 没有了取而代之的是配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.etoak.student.config;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.datasource.DriverManagerDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.TransactionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="comment">//代表该类是一个配置类相当于写了一个applicationContext.xml</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//&lt;context:component-scan basePackages=&quot;&quot;&gt;</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.etoak.student&quot;)</span></span><br><span class="line"><span class="comment">//&lt;context:property-placeholder&gt;</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:db.properties&quot;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span> <span class="comment">//&lt;mvc:annotation-driven&gt;</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span> <span class="comment">//&lt;tx:annotation-driven&gt; @Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ETConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//&lt;mvc:default-servlet-handler&gt;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;m.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;m.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;m.user&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;m.pwd&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//向IOC容器中注册bean对象 默认名字是</span></span><br><span class="line">    方法名字 对象是方法返回值</span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">jt</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        jt.setDataSource(<span class="built_in">this</span>.ds());</span><br><span class="line">        <span class="keyword">return</span> jt;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//JdbcTemplate 和 SqlSessionFactoryBean 二者只存其一</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    @Bean(&quot;f&quot;)</span></span><br><span class="line"><span class="comment">    public SqlSessionFactoryBean ssfb()&#123;</span></span><br><span class="line"><span class="comment">        SqlSessionFactoryBean f = new SqlSessionFactoryBean();</span></span><br><span class="line"><span class="comment">        f.setDataSource(this.ds());</span></span><br><span class="line"><span class="comment">        f.setTypeAliasesPackage(&quot;com.etoak.user.entity&quot;);</span></span><br><span class="line"><span class="comment">        f.setMapperLocations(new ClassPathResource(&quot;mappers/UsersMapper.xml&quot;));</span></span><br><span class="line"><span class="comment">        f.setConfigLocation(new ClassPathResource(&quot;mybatis-config.xml&quot;));</span></span><br><span class="line"><span class="comment">        return f;</span></span><br><span class="line"><span class="comment">    &#125; </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean(&quot;dataSource&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">ds</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DriverManagerDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DriverManagerDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(<span class="built_in">this</span>.driver);</span><br><span class="line">        ds.setUrl(<span class="built_in">this</span>.url);</span><br><span class="line">        ds.setUsername(<span class="built_in">this</span>.uname);</span><br><span class="line">        ds.setPassword(<span class="built_in">this</span>.pwd);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * &lt;bean id=&quot;transactionManager&quot;</span></span><br><span class="line"><span class="comment">    class=&quot;org.springframework.jdbc.datasource.</span></span><br><span class="line"><span class="comment">    DataSourceTransactionManager&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;property name=&quot;dataSource&quot;</span></span><br><span class="line"><span class="comment">    ref=&quot;ds&quot;&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">    &lt;/bean&gt;</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> TransactionManager <span class="title function_">transactionManager</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        transactionManager.setDataSource(<span class="built_in">this</span>.ds());</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>注解 @RestController @RequestMapping @ResponseBody</p>
</li>
<li>
<p>web.xml 也可以通过代码的方式动态注册 Servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.etoak.student.startup;</span><br><span class="line"><span class="keyword">import</span> com.etoak.student.config.ETConfig;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.WebApplicationInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.support.AnnotationConfigWebApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.DispatcherServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRegistration;</span><br><span class="line"><span class="comment">//Web.xml中的配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ETStartUp</span> <span class="keyword">implements</span> <span class="title class_">WebApplicationInitializer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartup</span><span class="params">(ServletContext servletContext)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// Load Spring web applicationconfiguration</span></span><br><span class="line">        <span class="comment">//ClassPathXmlApplicationContext</span></span><br><span class="line">        <span class="type">AnnotationConfigWebApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigWebApplicationContext</span>();</span><br><span class="line">        <span class="comment">//注册 配置类</span></span><br><span class="line">        context.register(ETConfig.class);</span><br><span class="line">        <span class="comment">// Create and register the DispatcherServlet</span></span><br><span class="line">        <span class="type">DispatcherServlet</span> <span class="variable">servlet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DispatcherServlet</span>(context);</span><br><span class="line">        ServletRegistration.<span class="type">Dynamic</span> <span class="variable">registration</span> <span class="operator">=</span> servletContext.addServlet(<span class="string">&quot;app&quot;</span>, servlet);</span><br><span class="line">        registration.setLoadOnStartup(<span class="number">1</span>);</span><br><span class="line">        registration.addMapping(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="javaweb中的过滤器"><a class="markdownIt-Anchor" href="#javaweb中的过滤器">#</a> JAVAWEB 中的过滤器</h3>
<ul>
<li>Filter 方法列表
<ul>
<li>init(FilterConfig)</li>
<li>doFilter(req,resp,FilterChain)</li>
<li>destroy</li>
</ul>
</li>
<li>FilterConfig 方法列表
<ul>
<li>getInitParameter(String)</li>
<li>getInitParameterNames()</li>
<li>getServletContext()</li>
<li>getFilterName()</li>
</ul>
</li>
</ul>
<blockquote>
<p>Filter 开发完毕之后一定要在 web.xml 中注册 （servlet3.0 之前），servlet3.0 之后，可以通过 @WebFilter 或者动态注册的方式注册 filter</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">XML</span>版</span><br><span class="line">&lt;<span class="keyword">filter</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">filter</span>-<span class="type">name</span>&gt;&lt;/<span class="keyword">filter</span>-<span class="type">name</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">filter</span>-<span class="keyword">class</span>&gt;&lt;/<span class="keyword">filter</span>-<span class="keyword">class</span>&gt;</span><br><span class="line">&lt;/<span class="keyword">filter</span>&gt;</span><br><span class="line">&lt;<span class="keyword">filter</span>-<span class="keyword">mapping</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">filter</span>-<span class="type">name</span>&gt;&lt;/<span class="keyword">filter</span>-<span class="type">name</span>&gt;</span><br><span class="line">    &lt;url-pattern&gt;&lt;/url-pattern&gt;</span><br><span class="line">&lt;/<span class="keyword">filter</span>-<span class="keyword">mapping</span>&gt;</span><br><span class="line"></span><br><span class="line">注解:</span><br><span class="line">@WebServlet @WebFilter</span><br><span class="line"></span><br><span class="line">代码</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>如果有多个过滤器，执行顺序和配置方式有关:</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>使用web.xml配置，<span class="built_in">Filter</span>的执行顺序按照&lt;<span class="built_in">filter</span>mapping&gt;&lt;/<span class="built_in">filter</span>-mapping&gt;配置的先后。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>使用注解版的配置，<span class="built_in">Filter</span>执行顺序和过滤器的名字的</span><br><span class="line">字母顺序有关。</span><br><span class="line">NameFilter Char..... Char先执行。</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>如果采用SPI动态注册方式，则和addMappingUrl的顺</span><br><span class="line">序相关</span><br><span class="line">FilterRegistration.Dynamic fd1 = servletContext.addFilter(<span class="string">&quot;aname1&quot;</span>,OCharacterEncodingFilter.class);</span><br><span class="line">fd1.setInitParameter(<span class="string">&quot;encoding&quot;</span>,<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">fd1.setInitParameter(<span class="string">&quot;forceEncoding&quot;</span>,<span class="string">&quot;true&quot;</span>);</span><br><span class="line">FilterRegistration.Dynamic fd =</span><br><span class="line">servletContext.addFilter(<span class="string">&quot;name&quot;</span>,NameFilter.class);</span><br><span class="line"><span class="comment">//先执行fd ,再执行fd1</span></span><br><span class="line">fd.addMappingForUrlPatterns(<span class="literal">null</span>,<span class="literal">true</span>,<span class="string">&quot;/suanming&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="四大域范围"><a class="markdownIt-Anchor" href="#四大域范围">#</a> 四大域范围</h3>
<ul>
<li>
<p>PageContext:[PageContext]</p>
</li>
<li>
<p>request:[HttpServletRequest]</p>
</li>
<li>
<p>session:[HttpSession]</p>
</li>
<li>
<p>application:[ServletContext]</p>
<p>以上四个接口都有 setAttribute 和 getAttribute 方法，都可以存放东西，在同步请求多的需求下，一般会用到四大域。</p>
</li>
</ul>
<h3 id="服务器端的跳转方式"><a class="markdownIt-Anchor" href="#服务器端的跳转方式">#</a> 服务器端的跳转方式</h3>
<ul>
<li><strong>请求转发:request.getRequestDispatcher ().forward (req,resp)</strong>
<ul>
<li>
<ol>
<li>客户端发出一次请求，服务器端进行转发操作， 客户端不知道。</li>
</ol>
</li>
<li>
<ol start="2">
<li>自始至终是一个请求，所以只要放在请求域中的 东西，转发之后也可以获得。</li>
</ol>
</li>
</ul>
</li>
<li><strong>重定向:resp.sendRedirect (“index.jsp”)</strong>
<ul>
<li>
<ol>
<li>客户端发出请求–》服务器 —》返回 302+location</li>
</ol>
</li>
<li>
<ol start="2">
<li>客户端再一次发送请求–》location</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="监听器listener-当"><a class="markdownIt-Anchor" href="#监听器listener-当">#</a> 监听器 Listener 当…</h3>
<table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">构造者 new</th>
<th style="text-align:center">实现着 {}</th>
<th style="text-align:center">调用者.</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Servlet</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
<td style="text-align:center">容器</td>
</tr>
<tr>
<td style="text-align:center">ServletConfig</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
</tr>
<tr>
<td style="text-align:center">ServletContext</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
</tr>
<tr>
<td style="text-align:center">Filter</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
<td style="text-align:center">容器</td>
</tr>
<tr>
<td style="text-align:center">FilterConfig</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
</tr>
<tr>
<td style="text-align:center">request</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
</tr>
<tr>
<td style="text-align:center">response</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
</tr>
<tr>
<td style="text-align:center">Cookie</td>
<td style="text-align:center">我们</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">容器</td>
</tr>
<tr>
<td style="text-align:center">Listener</td>
<td style="text-align:center">容器</td>
<td style="text-align:center">我们</td>
<td style="text-align:center">容器</td>
</tr>
</tbody>
</table>
<ul>
<li>在 servlet 中几乎所有的对象都不是我们构造的。所以 如果我们有一些需求在某些对象创建销毁时执行一些 业务逻辑。就需要用到监听器</li>
<li>JAVAWEB 中的监听器
<ul>
<li>ServletContextListener: 监听 ServletContext 对象创建 和销毁的</li>
<li>ServletRequestListener: 监听 request 创建和销毁的</li>
<li>HttpSessionListener: 监听 Session 的创建和销毁的</li>
<li>ServletRequestAttributeListener: 监听 Request 中属性 变化的</li>
<li>ServletContextAttributeListener: 监听 ServletContext 中属性变化的</li>
<li>HttpSessionIdListener: 监听 Sessionid 变化的。</li>
</ul>
</li>
<li>实现监听器必须实现某一个接口</li>
</ul>
<h3 id="javaweb之cookie机制"><a class="markdownIt-Anchor" href="#javaweb之cookie机制">#</a> javaweb 之：Cookie 机制</h3>
<ol>
<li>
<p>学习 Cookie 和 Session 的原因？</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Http协议本身是无状态的，即 多次请求之间不会保存任何</span><br><span class="line">的状态信息。但是实际开发中，很多时候需要多次请求之间传</span><br><span class="line">递信息。就需要学习保持会话的技术<span class="string">.cookie</span>和session都是</span><br><span class="line">用来保持会话技术。</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Cookie 机制？</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">javax<span class="selector-class">.servlet</span><span class="selector-class">.http</span><span class="selector-class">.Cookie</span>:类 唯一一个JAVAWEB中我们可以new</span><br><span class="line"></span><br><span class="line"><span class="number">1</span><span class="selector-class">.Cookie</span>:曲奇饼,小饼干。是由服务器传递给客户端的一小</span><br><span class="line">撮儿字符串信息。保存在客户端浏览器中(内存/硬盘), 稍后</span><br><span class="line">再次访问该服务器时，把Cookie信息回送到服务器上。</span><br><span class="line">Cookie只能是文本信息。 最大不超过<span class="number">4</span>K</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.如何发送cookie:<span class="selector-attr">[Server---&gt;Client]</span></span><br><span class="line">	<span class="number">1</span>.Cookie信息通过 response<span class="selector-class">.addCookie</span>(new</span><br><span class="line"><span class="function"><span class="title">Cookie</span><span class="params">(key,value)</span></span>)，这个方法的底层是通过添加HTTP响</span><br><span class="line">应头的方式把cookie信息从服务器传送给客户端。</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.如何返回cookie:<span class="selector-attr">[Client===&gt;Server]</span></span><br><span class="line">	当再次访问该服务器时，Cookie信息保存到HTTP请求头</span><br><span class="line">中，回送给服务器。我们在服务器上（Servlet/Controller</span><br><span class="line">等。）通过request<span class="selector-class">.getCookies</span>()获得本次请求携带的上</span><br><span class="line">一次服务器发送客户端的Cookie信息。</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.Cookie是唯一一个我们可以new的对象，必须我们new，可</span><br><span class="line">以设置过期时间<span class="built_in">setMaxAge</span>(秒为单位)，如果不设置</span><br><span class="line">maxage，则保存在内存中。</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="session机制"><a class="markdownIt-Anchor" href="#session机制">#</a> Session 机制</h3>
<ol>
<li>
<p>原理</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.</span><span class="keyword">session</span>表示会话。以一般一个会话包含多个请求。</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span><span class="keyword">Session</span>机制的核心</span><br><span class="line">API:javax.servlet.http.HttpSession接口</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>当客户端第一次访问服务器，并且服务器执行</span><br><span class="line">request.getSession()方法时，服务器会在服务器内存中</span><br><span class="line">创建一个HttpSession类型的对象，然后给该对象分配一个唯</span><br><span class="line">一标识sessionid.以cookie的形式把sessionid返回给客</span><br><span class="line">户端浏览器。保存到浏览器内存中。</span><br><span class="line">setAttribute(key,<span class="keyword">value</span>);登录</span><br><span class="line">==<span class="keyword">session</span>.setAttribute(&quot;user&quot;,<span class="keyword">user</span>)</span><br><span class="line">内存购物车</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>当再一次访问该服务器时，sessionid以cookie的形式返</span><br><span class="line">回给服务器。服务器根据sessionid,到内存中找到<span class="keyword">session</span></span><br><span class="line">对象，获得内容。</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>session 的会话失效的情况</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">session</span>有一个默认有效时间，默认<span class="number">1800</span>秒</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>invalidate 方法被调用。<span class="keyword">session</span>立即失效 ==》注销/退出</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>关闭浏览器。浏览器关闭<span class="comment">---》内存释放--》sessionid没</span></span><br><span class="line">了<span class="comment">--》服务器不能根据sessionid找到原来session对象了，</span></span><br><span class="line">只能给新的。</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Session 中一般存放那些数据</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.一个页面需要用到的数据</span><br><span class="line"><span class="variable">request</span>: <span class="variable">setAttribute</span>/<span class="function"><span class="title">getAttribute</span>()</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.多个页面需要展示的数据:<span class="variable">session</span></span><br><span class="line"><span class="function"><span class="title">setAttribute</span>()/<span class="title">getAttribute</span>()</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.所有人共同使用的数据</span><br><span class="line"><span class="variable"><span class="class">application</span></span>==<span class="variable">ServletContext</span>:<span class="function"><span class="title">setAttribute</span>()/<span class="title">getAttribute</span>()</span></span><br><span class="line"></span><br><span class="line">域	范围</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Cookie 和 Session 的区别</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>Cookie的对象 程序猿自己<span class="built_in">new</span>,<span class="keyword">Session</span>对象 服务器构造。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>Cookie信息存放在客户端浏览器。<span class="keyword">Session</span>对象存放在服务器内存。</span><br><span class="line"></span><br><span class="line">联系:<span class="keyword">session</span>机制实现的过程中，使用到了cookie,sessionid</span><br></pre></td></tr></table></figure>
</li>
</ol>

      <div class="tags">
          <a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag"><i class="ic i-tag"></i> 后端开发</a>
          <a href="/tags/SpringBoot/" rel="tag"><i class="ic i-tag"></i> SpringBoot</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">更新于</span>
    <time title="修改时间：2026-01-07 14:12:04" itemprop="dateModified" datetime="2026-01-07T14:12:04+08:00">2026-01-07</time>
  </span>
  <span id="full-stack/back-end/back-note/month4/" class="item leancloud_visitors" data-flag-title="SpringBoot" title="阅读次数">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">阅读次数</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">次</span>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>libert-Aries <i class="ic i-at"><em>@</em></i>你来啦！
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="http://example.com/full-stack/back-end/back-note/month4/" title="SpringBoot">http://example.com/full-stack/back-end/back-note/month4/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/full-stack/front-end/front-note/month3/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;t.alcy.cc&#x2F;fj?132608" title="前端与数据库">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> 前端</span>
  <h3>前端与数据库</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/full-stack/back-end/back-note/month5/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;t.alcy.cc&#x2F;fj?171970" title="SpringBoot集成MyBatis">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> 后端</span>
  <h3>SpringBoot集成MyBatis</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#jdbc"><span class="toc-number">1.</span> <span class="toc-text"> JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#jdbc%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">1.1.</span> <span class="toc-text"> JDBC 的基本流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%99%A8%E4%B8%AD%E7%9A%84%E6%89%A7%E8%A1%8Csql%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text"> 执行器中的执行 SQL 的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E7%BC%96%E8%AF%91%E7%9A%84%E6%89%A7%E8%A1%8C%E5%99%A8preparedstatement"><span class="toc-number">1.3.</span> <span class="toc-text"> 预编译的执行器 PreparedStatement</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E5%A2%9E%E9%95%BF%E7%9A%84%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%B8%BB%E9%94%AE%E5%A6%82%E4%BD%95%E8%BF%94%E5%9B%9E"><span class="toc-number">1.4.</span> <span class="toc-text"> 可以自动增长的数字类型的主键如何返回</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E5%A2%9E%E9%95%BF%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%B8%BB%E9%94%AE%E5%A6%82%E4%BD%95%E8%BF%94%E5%9B%9E"><span class="toc-number">1.5.</span> <span class="toc-text"> 不可以自动增长的字符串类型的主键如何返回</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.</span> <span class="toc-text"> 元数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.7.</span> <span class="toc-text"> 事务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#javaweb%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80"><span class="toc-number">2.</span> <span class="toc-text"> JAVAWEB 开发基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82"><span class="toc-number">2.1.</span> <span class="toc-text"> 请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94"><span class="toc-number">2.2.</span> <span class="toc-text"> 响应</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8servletresponse%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9B%B8%E5%BA%94%E5%86%85%E5%AE%B9"><span class="toc-number">2.3.</span> <span class="toc-text"> 使用 ServletResponse 给客户端相应内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%93%8D%E5%BA%94%E7%BC%96%E7%A0%81"><span class="toc-number">2.4.</span> <span class="toc-text"> 修改响应编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#request%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">2.5.</span> <span class="toc-text"> request 对象中的内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">2.6.</span> <span class="toc-text"> 客户端向服务器发送请求的方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84"><span class="toc-number">3.</span> <span class="toc-text"> 反射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.</span> <span class="toc-text"> 注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ioc%E5%AE%B9%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text"> IOC 容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ioc%E5%AE%B9%E5%99%A8%E6%9E%84%E9%80%A0%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text"> IOC 容器构造对象的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ioc%E5%AE%B9%E5%99%A8%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text"> IOC 容器属性赋值的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%89%88%E7%9A%84controller-service-dao-db"><span class="toc-number">8.</span> <span class="toc-text"> XML（配置文件）版的 controller-service-dao-db</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B3%A8%E8%A7%A3-%E6%B7%B7%E5%90%88%E7%89%88%E7%9A%84controller-service-dao-db"><span class="toc-number">9.</span> <span class="toc-text"> 配置文件 + 注解 混合版的 controller-service-dao-db</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%8C%85%E6%80%BB%E7%BB%93"><span class="toc-number">10.</span> <span class="toc-text"> 导包总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93"><span class="toc-number">11.</span> <span class="toc-text"> 注解总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jdbctemplate%E5%B7%A5%E5%85%B7%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">12.</span> <span class="toc-text"> JdbcTemplate 工具类的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E6%97%B6%E9%9C%80%E8%A6%81%E8%BF%94%E5%9B%9E%E4%B8%BB%E9%94%AE"><span class="toc-number">12.1.</span> <span class="toc-text"> 连接数据库时，需要返回主键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rowmapper-%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C%E9%9B%86"><span class="toc-number">12.2.</span> <span class="toc-text"> RowMapper : 处理结果集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#columnmaprowmapper%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C%E9%9B%86"><span class="toc-number">12.3.</span> <span class="toc-text"> ColumnMapRowMapper 处理结果集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#singlecolumnrowmapper%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C%E9%9B%86"><span class="toc-number">12.4.</span> <span class="toc-text"> SingleColumnRowMapper 处理结果集</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%89%88%E7%9A%84%E6%B5%8B%E8%AF%95%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-number">13.</span> <span class="toc-text"> 注解版的测试类中的文件读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87spring-webmvc%E6%A8%A1%E5%9D%97%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82-%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94"><span class="toc-number">14.</span> <span class="toc-text"> 通过 Spring webmvc 模块接收请求 返回响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#springmvc%E4%B8%AD%E5%A6%82%E4%BD%95%E6%8A%8A%E5%8F%82%E6%95%B0%E4%BB%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BC%A0%E9%80%92%E7%BB%99%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">15.</span> <span class="toc-text"> SpringMVC 中如何把参数从客户端传递给服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BC%A0%E9%80%92%E7%9A%84%E6%98%AF"><span class="toc-number">15.0.1.</span> <span class="toc-text"> 客户端传递的是:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">16.</span> <span class="toc-text"> redis 数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mvc%E6%B3%A8%E8%A7%A3-requestmapping-responsebody"><span class="toc-number">17.</span> <span class="toc-text"> mvc 注解 @RequestMapping @ResponseBody</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BA%A4%E7%BB%99defaultservlet%E5%A4%84%E7%90%86"><span class="toc-number">18.</span> <span class="toc-text"> 静态资源交给 DefaultServlet 处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E5%99%A8-id%E5%BF%85%E9%A1%BB%E5%8F%ABmultipartresolver"><span class="toc-number">19.</span> <span class="toc-text"> 文件上传解析器 id：必须叫 multipartResolver</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis"><span class="toc-number">20.</span> <span class="toc-text"> MyBatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis%E6%8F%90%E4%BE%9B%E7%9A%84%E7%94%A8%E6%88%B7%E6%8E%A5%E5%8F%A3"><span class="toc-number">21.</span> <span class="toc-text"> MyBatis 提供的用户接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis-configxml%E9%85%8D%E7%BD%AE"><span class="toc-number">22.</span> <span class="toc-text"> mybatis-config.xml 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xxxmapperxml"><span class="toc-number">23.</span> <span class="toc-text"> XXXMapper.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E4%B8%AD%E5%B1%9E%E6%80%A7%E5%92%8C%E8%A1%A8%E4%B8%AD%E5%AD%97%E6%AE%B5%E4%B8%8D%E5%AE%8C%E5%85%A8%E4%B8%80%E8%87%B4"><span class="toc-number">24.</span> <span class="toc-text"> 类中属性和表中字段不完全一致</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-number">25.</span> <span class="toc-text"> 传递多个参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resulttype%E5%92%8Cresultmap"><span class="toc-number">26.</span> <span class="toc-text"> resultType 和 resultMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis%E8%8E%B7%E5%BE%97%E6%B7%BB%E5%8A%A0%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E4%B8%BB%E9%94%AE"><span class="toc-number">27.</span> <span class="toc-text"> MyBatis 获得添加到数据库中的主键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0"><span class="toc-number">28.</span> <span class="toc-text"> 批量添加</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E6%A0%87%E7%AD%BEforeach"><span class="toc-number">28.1.</span> <span class="toc-text"> 使用动态标签 foreach</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E5%92%8C"><span class="toc-number">29.</span> <span class="toc-text"> 模糊查询：# 和 $</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis%E4%B8%AD%E7%9A%84%E5%8A%A8%E6%80%81sql%E6%A0%87%E7%AD%BE"><span class="toc-number">30.</span> <span class="toc-text"> MyBatis 中的动态 SQL 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E5%92%8C%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2"><span class="toc-number">31.</span> <span class="toc-text"> 一对一和一对多的关联查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis-configxml%E4%B8%AD%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">32.</span> <span class="toc-text"> mybatis-config.xml 中起别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEapplicationcontextxml"><span class="toc-number">33.</span> <span class="toc-text"> 配置 applicationContext.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%B8%8A%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">34.</span> <span class="toc-text"> 实体类上起别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6pagehelper"><span class="toc-number">35.</span> <span class="toc-text"> 分页插件 pagehelper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E5%90%8E%E7%AB%AF%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">36.</span> <span class="toc-text"> 前后端日期时间格式转换（客户端 &#x3D;&#x3D;&#x3D; 服务器）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spring%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1aop%E6%80%9D%E6%83%B3"><span class="toc-number">37.</span> <span class="toc-text"> spring 中的事务（aop 思想）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%85%B3%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%89%8D%E5%90%8E%E7%AB%AF%E5%8F%82%E6%95%B0%E5%90%8D%E7%A7%B0"><span class="toc-number">38.</span> <span class="toc-text"> 有关文件上传前后端参数名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#servlet30%E4%B9%8B%E5%90%8E%E5%88%9B%E5%BB%BAservlet%E6%96%B0%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">39.</span> <span class="toc-text"> Servlet3.0 之后创建 Servlet 新的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%AF%E6%B3%A8%E8%A7%A3%E7%89%88%E7%9A%84spring-mvc%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4"><span class="toc-number">40.</span> <span class="toc-text"> 纯注解版的 Spring MVC 配置步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#javaweb%E4%B8%AD%E7%9A%84%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">41.</span> <span class="toc-text"> JAVAWEB 中的过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E5%A4%A7%E5%9F%9F%E8%8C%83%E5%9B%B4"><span class="toc-number">42.</span> <span class="toc-text"> 四大域范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%9A%84%E8%B7%B3%E8%BD%AC%E6%96%B9%E5%BC%8F"><span class="toc-number">43.</span> <span class="toc-text"> 服务器端的跳转方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E5%99%A8listener-%E5%BD%93"><span class="toc-number">44.</span> <span class="toc-text"> 监听器 Listener 当…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#javaweb%E4%B9%8Bcookie%E6%9C%BA%E5%88%B6"><span class="toc-number">45.</span> <span class="toc-text"> javaweb 之：Cookie 机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session%E6%9C%BA%E5%88%B6"><span class="toc-number">46.</span> <span class="toc-text"> Session 机制</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
        <ul>
          <li><a href="/full-stack/back-end/back-note/super,this,%E9%87%8D%E5%86%99/" rel="bookmark" title="super,this,重写">super,this,重写</a></li><li><a href="/full-stack/back-end/back-note/month1/" rel="bookmark" title="JavaSE">JavaSE</a></li><li><a href="/full-stack/back-end/back-note/month2/" rel="bookmark" title="IO流">IO流</a></li><li class="active"><a href="/full-stack/back-end/back-note/month4/" rel="bookmark" title="SpringBoot">SpringBoot</a></li><li><a href="/full-stack/back-end/back-note/month5/" rel="bookmark" title="SpringBoot集成MyBatis">SpringBoot集成MyBatis</a></li><li><a href="/full-stack/back-end/back-note/%E6%8B%A6%E6%88%AA%E5%99%A8/" rel="bookmark" title="拦截器">拦截器</a></li><li><a href="/full-stack/back-end/back-note/MyBatisPlus/" rel="bookmark" title="Mybatisplus">Mybatisplus</a></li><li><a href="/full-stack/back-end/back-note/Exception/" rel="bookmark" title="异常处理">异常处理</a></li><li><a href="/full-stack/back-end/back-note/RabbitMQ/" rel="bookmark" title="RabbitMQ">RabbitMQ</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="libert-Aries"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">libert-Aries</p>
  <div class="description" itemprop="description">热烈 自由</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">20</span>
        <span class="name">文章</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">7</span>
        <span class="name">分类</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">14</span>
        <span class="name">标签</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpYmVydC1Bcmllcw==" title="https:&#x2F;&#x2F;github.com&#x2F;libert-Aries"><i class="ic i-github"></i></span>
      <span class="exturl item email" data-url="bWFpbHRvOjM5NTExMzExMEBxcS5jb20=" title="mailto:395113110@qq.com"><i class="ic i-envelope"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a>
  </li>

        
  <li class="item dropdown">
      <a href="/about/" rel="section"><i class="ic i-paper-plane"></i>关于</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/me/" rel="section"><i class="ic i-user"></i>关于我</a>
  </li>

        
  <li class="item">
    <a href="/wisper/" rel="section"><i class="ic i-pen"></i>碎碎念</a>
  </li>

  </ul>

</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/full-stack/front-end/front-note/month3/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/full-stack/back-end/back-note/month5/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Theme-Shoka-Documentation/" title="分类于 Theme Shoka Documentation">Theme Shoka Documentation</a>
</div>

    <span><a href="/theme-shoka-doc/config/" title="Step.2 基本配置">Step.2 基本配置</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/full-stack/" title="分类于 全栈">全栈</a>
<i class="ic i-angle-right"></i>
<a href="/categories/full-stack/back-end/" title="分类于 后端">后端</a>
</div>

    <span><a href="/full-stack/back-end/back-note/month2/" title="IO流">IO流</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6Java%E8%AF%AD%E8%A8%80-%E6%B5%99%E6%B1%9F%E5%A4%A7%E5%AD%A6-%E7%BF%81%E6%81%BA/" title="分类于 零基础学Java语言-浙江大学-翁恺">零基础学Java语言-浙江大学-翁恺</a>
</div>

    <span><a href="/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6java/week-1/" title="第1周 计算">第1周 计算</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Theme-Shoka-Documentation/" title="分类于 Theme Shoka Documentation">Theme Shoka Documentation</a>
</div>

    <span><a href="/theme-shoka-doc/display/" title="Step.3 界面显示">Step.3 界面显示</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/full-stack/" title="分类于 全栈">全栈</a>
<i class="ic i-angle-right"></i>
<a href="/categories/full-stack/front-end/" title="分类于 前端">前端</a>
</div>

    <span><a href="/full-stack/front-end/front-note/month3/" title="前端与数据库">前端与数据库</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/full-stack/" title="分类于 全栈">全栈</a>
<i class="ic i-angle-right"></i>
<a href="/categories/full-stack/back-end/" title="分类于 后端">后端</a>
</div>

    <span><a href="/full-stack/back-end/back-note/month5/" title="SpringBoot集成MyBatis">SpringBoot集成MyBatis</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/full-stack/" title="分类于 全栈">全栈</a>
<i class="ic i-angle-right"></i>
<a href="/categories/full-stack/front-end/" title="分类于 前端">前端</a>
</div>

    <span><a href="/full-stack/front-end/front-note/%E5%89%8D%E7%AB%AF%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/" title="前端请求方式">前端请求方式</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E7%A2%8E%E7%A2%8E%E7%89%87/" title="分类于 碎碎片">碎碎片</a>
</div>

    <span><a href="/Markdown%E4%BD%BF%E7%94%A8/Markdown/" title="Markdown使用">Markdown使用</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/full-stack/" title="分类于 全栈">全栈</a>
<i class="ic i-angle-right"></i>
<a href="/categories/full-stack/back-end/" title="分类于 后端">后端</a>
</div>

    <span><a href="/full-stack/back-end/back-note/month1/" title="JavaSE">JavaSE</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/full-stack/" title="分类于 全栈">全栈</a>
<i class="ic i-angle-right"></i>
<a href="/categories/full-stack/back-end/" title="分类于 后端">后端</a>
</div>

    <span><a href="/full-stack/back-end/back-note/RabbitMQ/" title="RabbitMQ">RabbitMQ</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>最新评论</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">libert-Aries @ libert-Aries's blog</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="站点总字数">194k 字</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="站点阅读时长">2:57</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: 'full-stack/back-end/back-note/month4/',
    favicon: {
      show: "（●´3｀●）爱你呦",
      hide: "(´Д｀)看这里だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: {"placeholder":"1. 提问前请先仔细阅读本文档⚡\n2. 页面显示问题💥，请提供控制台截图📸或者您的测试网址\n3. 其他任何报错💣，请提供详细描述和截图📸，祝食用愉快💪"},fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
